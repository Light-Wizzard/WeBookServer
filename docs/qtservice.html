<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qtservice.cpp -->
  <title>QtService Class | WeBookServer.pro 5.15.0</title>
</head>
<body>
<li>QtService</li>
<div class="sidebar">
<div class="toc">
<h3><a name="toc">Contents</a></h3>
<ul>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">QtService Class</h1>
<!-- $$$QtService-brief -->
<p>The QtService is a convenient template class that allows you to create a service for a particular application type. <a href="#details">More...</a></p>
<!-- @@@QtService -->
<div class="table"><table class="alignedsummary">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign"> <span class="preprocessor">#include &lt;QtService&gt;</span>
</td></tr><tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <a href="qtservicebase.html">QtServiceBase</a></td></tr></table></div><ul>
<li><a href="qtservice-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="details"></a>
<!-- $$$QtService-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>A Windows service or Unix daemon (a &quot;service&quot;), is a program that runs &quot;in the background&quot; independently of whether a user is logged in or not. A service is often set up to start when the machine boots up, and will typically run continuously as long as the machine is on.</p>
<p>Services are usually non-interactive console applications. User interaction, if required, is usually implemented in a separate, normal GUI application that communicates with the service through an IPC channel. For simple communication, QtServiceController::sendCommand() and <a href="qtservicebase.html#processCommand">QtService::processCommand</a>() may be used, possibly in combination with a shared settings file. For more complex, interactive communication, a custom IPC channel should be used, e.g&#x2e; based on Qt's networking classes. (In certain circumstances, a service may provide a GUI itself, ref. the &quot;interactive&quot; example documentation).</p>
<p><b>Note:</b> On Unix systems, this class relies on facilities provided by the QtNetwork module, provided as part of the Qt Open Source Edition and certain Qt Commercial Editions.</p>
<p>The QtService class functionality is inherited from <a href="qtservicebase.html">QtServiceBase</a>, but in addition the QtService class binds an instance of <a href="qtservicebase.html">QtServiceBase</a> with an application type.</p>
<p>Typically, you will create a service by subclassing the QtService template class. For example:</p>
<pre class="cpp"><span class="keyword">class</span> MyService : <span class="keyword">public</span> <span class="type">QtService</span><span class="operator">&lt;</span><span class="type">QApplication</span><span class="operator">&gt;</span>
{
<span class="keyword">public</span>:
    MyService(<span class="type">int</span> argc<span class="operator">,</span> <span class="type">char</span> <span class="operator">*</span><span class="operator">*</span>argv);
    <span class="operator">~</span>MyService();

<span class="keyword">protected</span>:
    <span class="type">void</span> start();
    <span class="type">void</span> stop();
    <span class="type">void</span> pause();
    <span class="type">void</span> resume();
    <span class="type">void</span> processCommand(<span class="type">int</span> code);
};</pre>
<p>The application type can be QCoreApplication for services without GUI, QApplication for services with GUI or you can use your own custom application type.</p>
<p>You must reimplement the <a href="qtservicebase.html#start">QtServiceBase::start</a>() function to perform the service's work. Usually you create some main object on the heap which is the heart of your service.</p>
<p>In addition, you might want to reimplement the <a href="qtservicebase.html#pause">QtServiceBase::pause</a>(), <a href="qtservicebase.html#processCommand">QtServiceBase::processCommand</a>(), <a href="qtservicebase.html#resume">QtServiceBase::resume</a>() and <a href="qtservicebase.html#stop">QtServiceBase::stop</a>() to intervene the service's process on controller requests. You can control any given service using an instance of the <a href="qtservicecontroller.html">QtServiceController</a> class which also allows you to control services from separate applications. The mentioned functions are all virtual and won't do anything unless they are reimplemented.</p>
<p>Your custom service is typically instantiated in the application's main function. Then the main function will call your service's exec() function, and return the result of that call. For example:</p>
<pre class="cpp"><span class="type">int</span> main(<span class="type">int</span> argc<span class="operator">,</span> <span class="type">char</span> <span class="operator">*</span><span class="operator">*</span>argv)
{
    MyService service(argc<span class="operator">,</span> argv);
    <span class="keyword">return</span> service<span class="operator">.</span>exec();
}</pre>
<p>When the exec() function is called, it will parse the service specific arguments passed in <code>argv</code>, perform the required actions, and exit.</p>
<p>If none of the arguments is recognized as service specific, exec() will first call the <a href="qtservicebase.html#createApplication">createApplication</a>() function, then <a href="qtservicebase.html#executeApplication">executeApplication</a>() and finally the <a href="qtservicebase.html#start">start</a>() function. In the end, exec() returns while the service continues in its own process waiting for commands from the service controller.</p>
</div>
<p><b>See also </b><a href="qtservicebase.html">QtServiceBase</a> and <a href="qtservicecontroller.html">QtServiceController</a>.</p>
<!-- @@@QtService -->
</body>
</html>
